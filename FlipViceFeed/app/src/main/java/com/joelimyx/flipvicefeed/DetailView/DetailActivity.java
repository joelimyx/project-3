package com.joelimyx.flipvicefeed.DetailView;

import android.os.Bundle;
import android.support.design.widget.FloatingActionButton;
import android.support.design.widget.Snackbar;
import android.support.v7.app.AppCompatActivity;
import android.support.v7.widget.LinearLayoutManager;
import android.support.v7.widget.RecyclerView;
import android.support.v7.widget.Toolbar;
import android.view.View;
import android.widget.Toast;

import com.android.volley.Request;
import com.android.volley.RequestQueue;
import com.android.volley.Response;
import com.android.volley.VolleyError;
import com.android.volley.toolbox.StringRequest;
import com.android.volley.toolbox.Volley;
import com.joelimyx.flipvicefeed.DetailView.Adapters_Holders.ArticleInfoAdapter;
import com.joelimyx.flipvicefeed.DetailView.ArticleObjectData.ArticleObject;
import com.joelimyx.flipvicefeed.DetailView.ArticleObjectData.Image;
import com.joelimyx.flipvicefeed.DetailView.ArticleObjectData.Text;
import com.joelimyx.flipvicefeed.R;

import org.jsoup.Jsoup;
import org.w3c.dom.Document;
import org.w3c.dom.Element;

import java.util.ArrayList;
import java.util.List;

public class DetailActivity extends AppCompatActivity {

    RecyclerView mRV;
    ArticleInfoAdapter mAdapter;


    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_detail);
        Toolbar toolbar = (Toolbar) findViewById(R.id.toolbar);
        setSupportActionBar(toolbar);

        List<ArticleObject> list = new ArrayList<>();
        list.add(new Text("skjalrueffb gwetfewtf 9ewgf gofygefy gaifygafgyuieg feiuyagf ydugf gyf yewgf wagf af "));
        list.add(new Image("https://vice-images.vice.com/images/articles/meta/2016/11/30/you-can-finally-download-netflix-shows-to-watch-offline-vgtrn-1480523317.jpg?resize=*:*&output-quality=75"));

        list.add(new Text(getDataFromJSON("<p class=\\\"photo-credit has-image\\\"><img src=\\\"https://vice-images.vice.com/images/content-images-crops/2016/11/30/women-violence-harassment-street-876-body-image-1480516619-size_500.jpg\\\" alt=\\\"\\\" />Image by Flickr user <a href=\\\"https://www.flickr.com/photos/71267357@N06/\\\" target=\\\"_blank\\\">Transformer18</a><a href=\\\"https://www.flickr.com/photos/71267357@N06/14232218048/in/photolist-nFDQzN-mwqWEP-dbCbWV-q69uCU-nvN1hN-G4xWov-9mHe9g-ij9Lgj-hTPrvN-onoQcr-rxpgth-pvAz3P-jwbeqM-n8gXDk-pSogRw-pgdTto-fPpNNy-nPwVy7-Jy6cQ7-pndyEy-cbrURu-qLjTZA-q2WpDm-iwbEiF-dBUNsx-dfRkbv-dEo1mv-nW2GA7-nZ75QG-pieYqJ-om8u4X-jAvzfV-n1gP3U-douRyB-oz5occ-rhMd2v-qj64FQ-5UPX3K-dWYVGQ-nCyEwn-jQq9tY-p7abLQ-dmXCwQ-nmB9oy-jrHfH4-nT5mA4-nSaGoA-efBUMA-nJwcNR-cZ2AWh\\\" target=\\\"_blank\\\">via</a></p><p>As a woman walking around the city alone at night, it often feels like there's not much you can do if some creep decides to follow you around and harass you. But many women try to find a way to deal with feeling unsafe—to project an aura that will stop the harassment from happening. A brisk and confident step, eyes on the pavement, and a hand in the pocket of your coat, clutching your phone. </p><p>To see how women from different countries in Europe deal with street harassment, VICE offices across the continent asked women from 13 cities if and where they feel unsafe alone at night, and how they deal with that feeling. </p><h1>PARIS, FRANCE</h1><p class=\\\"has-image\\\"><strong><img src=\\\"https://vice-images.vice.com/images/content-images-crops/2016/11/29/women-violence-harassment-street-876-body-image-1480435585-size_500.jpg\\\" alt=\\\"\\\" /></strong> </p><h2>Marie, 26, student</h2><p><strong>VICE: Are there places in Paris where you don't feel safe alone at night? </strong><br><strong>Marie: </strong>Mostly in the wealthier Parisian neighborhoods, actually, because the streets are mostly empty at that time and no one will notice if you're attacked. But I have to say taking the tube at night is probably the worst. </p><p><strong>Why is that?</strong><br>Aside from all the general discomfort of being in a closed carriage underground with loads of other people, I've also had some particularly nasty experiences there. One time, while I was waiting on the platform, some guy tried to push me on the tracks. I've had a few pervs on the subway masturbating in front of me, and another time this maniac with a razor blade in his bloody hands followed me around. </p><p><strong>So how do you deal with that?<br></strong>I just leave the station when I don't feel safe. It's an ordeal to walk alone at night as a girl. There's always some asshole who makes a comment. Especially if you're wearing heels—the noise they make when you walk attracts creeps. </p><h1>MILAN, ITALY</h1><p class=\\\"has-image\\\"><strong><img src=\\\"https://vice-images.vice.com/images/content-images-crops/2016/11/29/women-violence-harassment-street-876-body-image-1480439526-size_500.jpg\\\" alt=\\\"\\\" /></strong> </p><h2>Lidia, 25, accountant</h2><p><strong>VICE: Are there any streets or areas in Milan you're afraid to go by yourself at night? <br></strong><strong>Lidia:</strong> I generally don't feel unsafe, but I'm more cautious when I'm in a rougher neighborhood or an isolated suburb where there aren't many people around. Ironically, I've experienced the most harassment in more central and busier areas of the city. </p><p><strong>What kind of things happened?<br></strong>Just a couple of months ago on the train home, a man sitting across from me unzipped his trousers and popped his dick out. That wasn't the first time that happened to me—it was the fourth time, actually. So it didn't exactly shock me, but I did change seats. </p><p><strong>Do you think you've become a bit desensitized?<br></strong>I don't think the fear of something bad happening will ever stop me from walking around at night. But it's very unsettling that so many women go through this on a daily basis—that getting harassed is basically the norm. </p><h1>LONDON, UNITED KINGDOM</h1><p class=\\\"has-image\\\"><strong><img src=\\\"https://vice-images.vice.com/images/content-images-crops/2016/11/29/women-violence-harassment-street-876-body-image-1480436566-size_500.jpg\\\" alt=\\\"\\\" /></strong> </p><h2>Pria, 29, nail technician</h2><p><strong>VICE: Do you feel safe walking around London on your own at night?</strong><br><strong>Pria:</strong> Usually I do, yeah. I live in East Ham, where it can be a little bit dodgy. So it's sometimes a bit scary—especially at night. </p><p><strong>Is there anything you do to make yourself feel safer?</strong><br>I purposely don't have my headphones on and don't make eye contact. If I'm alone and I see someone coming who makes me uncomfortable, I put my phone away and cross the road. </p><p><strong>Has anything in particular ever happened to you that put you off walking around alone at night? <br></strong>I've never had something really bad happen to me in that sense, which is why I'm kind of OK walking around alone. I'm from Derbyshire, and I generally feel safer in the little town I'm from, but there's still dodgy people. I sometimes feel safer in London because the streets are busier—if anything does happen, there are more people around. </p><h1>BERLIN, GERMANY</h1><p class=\\\"has-image\\\"><img src=\\\"https://vice-images.vice.com/images/content-images-crops/2016/11/29/women-violence-harassment-street-876-body-image-1480434742-size_500.jpg\\\" alt=\\\"\\\" /></p><h2>Gisa, 28, shop owner </h2><p><strong>VICE: Do you feel unsafe in Berlin?<br></strong><strong>Gisa:</strong> I've never seriously feared for my safety. But Berlin does have plenty of areas where I can feel a bit unsafe. I'm often out at strange hours, which means I cross paths with strange people. </p><p><strong>Where does that happen?</strong><br>At Hermannplatz in Neukölln, for example. Some guy followed me around in broad daylight there, spewing sexist shit at me. I think he wasn't quite right in the head. </p><p><strong>But that doesn't affect your general feeling of safety?</strong><br>No, I generally feel safe, especially when I'm riding my bike. I think people should stop being so scared—Berlin isn't as bad as everyone thinks. </p><h1>BUCHAREST, ROMANIA</h1><p class=\\\"has-image\\\"><img src=\\\"https://vice-images.vice.com/images/content-images-crops/2016/11/29/women-violence-harassment-street-876-body-image-1480435064-size_500.jpg\\\" alt=\\\"\\\" /></p><h2>Elena, 30, co-founder NGO </h2><p><strong>VICE: Is there any particular area in Bucharest where you feel unsafe at night?<br></strong><strong>Elena:</strong> I feel unsafe at Saint George's Square at night, which is in the heart of Bucharest. It's weird there, with a lot of abandoned houses and squatters. And something happened there last summer. </p><p><strong>What happened?<br></strong>I was walking to my car there around 5 PM when some guy jumped me from behind. He grabbed my breasts and my mouth, and he violently pulled me back. A guy who was supervising the parking lot came to help me and scared my assailant off. He didn't seem homeless or confused, and if he had just wanted to rob me, he would have grabbed my purse instead of my body. </p><p><strong>Do you think Bucharest is particularly unsafe for women alone at night?</strong><br>Well, you frequently have to deal with verbal harassment, but there's also the cultural notion that's like, \\\"What was she doing alone outside at that hour, and why was she wearing a skirt?\\\" And next to that, there's this Romanian idea of, \\\"I just slapped her, it's not like I killed her.\\\" So street harassment isn't a big thing for people who think like that. </p><h1>BARCELONA, SPAIN</h1><p class=\\\"has-image\\\"><img src=\\\"https://vice-images.vice.com/images/content-images-crops/2016/11/29/women-violence-harassment-street-876-body-image-1480433802-size_500.jpg\\\" alt=\\\"\\\" /></p><h2>Uda, 22, flyerer</h2><p><strong>VICE: Do you sometimes feel unsafe while walking home alone at night? </strong><br><strong>Uda:</strong> A lot of the time, not just at night. Men have catcalled me, asked for my number, harassed me. </p><p><strong>Is there a particular place in Barcelona where you'd rather not go by yourself?<br></strong>It's actually worse in places a bit outside of the city of Barcelona—in Badalona or Mataró [about half an hour from Barcelona], for example. There are so many guys living there who have no jobs, nothing to do all day, and just hang around pestering girls who happen to pass by. </p><p><strong>Why do you think Spain can be an unsafe place for women alone at night?<br></strong>It's probably related to machismo culture, which is still very present in Spain. But it depends on the guy, of course. I'm Muslim, and I find that there is still a lot of gender inequality among my community. I don't think that has anything to do with religion—it's a cultural issue, a question of upbringing. My father doesn't have a macho mindset at all, but my boyfriend does. He doesn't like seeing me go out on my own or with friends. </p><h1>BELGRADE, SERBIA</h1><p class=\\\"has-image\\\"><img src=\\\"https://vice-images.vice.com/images/content-images-crops/2016/11/29/women-violence-harassment-street-876-body-image-1480436586-size_500.jpg\\\" alt=\\\"\\\" /></p><h2>Sofija, 19, student</h2><p><strong>VICE: Do you avoid walking around alone at night in certain areas in the city?</strong><br><strong>Sofija: </strong>Yes, I avoid any street that isn't in the center, ones that have no street lights or people in them. Basically any streets that aren't main roads. I suppose we all try to prevent anything bad happening to us. </p><p><strong>So how do you get home at night? <br></strong>I never walk home alone. Either I take a taxi, or I sleep over at a friend's or my sister's. </p><p><strong>Why?<br></strong>It can be scary alone if it's dark, and I don't want anything to happen to me. I've heard a lot of stories. I live in the suburbs, but I study in Belgrade, and I heard that this girl who always took the same way home as me was raped. </p><h1>STOCKHOLM, SWEDEN</h1><p class=\\\"has-image\\\"><img src=\\\"https://vice-images.vice.com/images/content-images-crops/2016/11/29/women-violence-harassment-street-876-body-image-1480442594-size_500.jpg\\\" alt=\\\"\\\" /></p><h3>Ida, 24, travels around</h3><p><strong>VICE: Is there a particular street in Stockholm you won't go by yourself at night? <br></strong><strong>Ida: </strong>Not really. I don't feel very safe near the Central Station. There's more police there now, but generally a lot of stuff happens there. </p><p><strong>Have you experienced anything particularly threatening when you've been out alone at night?</strong><br>Not really. I've felt pretty vulnerable when I'm on the tube, and there aren't many people there. But I usually wear a hoodie, and my style is pretty gender neutral, so I'm sometimes mistaken for a dude. I've experienced a lot of aggression by men who assume I'm a guy and want to pick a fight with me. </p><p><strong>How do you think you could feel safer?<br></strong>Being a man would help. Anybody can get jumped or robbed, but there is another dimension of fear that I don't think cis men can ever understand or experience in the same way. And more education on the subject would be a good start, too. </p><h1>VIENNA, AUSTRIA </h1><p class=\\\"has-image\\\"><strong><img src=\\\"https://vice-images.vice.com/images/content-images-crops/2016/11/29/women-violence-harassment-street-876-body-image-1480442906-size_500.jpg\\\" alt=\\\"\\\" /></strong> </p><h2>Anna*, 20, student </h2><p><strong>VICE: Is there an area in Vienna you're uncomfortable being by yourself at night?<br></strong><strong>Anna*:</strong> I live in the suburbs, and on Mondays, I'm never home before 9 PM. My stop on the railway is usually quite deserted at that time of day—aside from older men, who have been total creeps to me there in the past. </p><p><strong>What did they do?<br></strong>They asked me what I was doing there all by myself, made some crude and inappropriate comments, or sometimes just asked me to come home with them. </p><p><strong>What do you do when that happens?</strong><br>I try to shake them off by walking fast and confidently. If that doesn't work, I tell them I don't have time for a chat and am going home alone. Luckily that has always done the trick so far. </p><h1>ZURICH, SWITZERLAND </h1><p class=\\\"has-image\\\"><strong><img src=\\\"https://vice-images.vice.com/images/content-images-crops/2016/11/29/women-violence-harassment-street-876-body-image-1480439466-size_500.jpg\\\" alt=\\\"\\\" /></strong> </p><h2>Carmela, 42, full-time mom</h2><p><strong>VICE: Is there an area in Zurich you try to avoid when you're by yourself at  night? <br></strong><strong>Carmela: </strong>I don't like walking down Langstrasse in Zurich's party  and red light district at night. I even feel unsafe there during the day. If anything would happen to you in Zurich, it would be there. And I've heard about a lot of things happening in suburbs like Schwamendingen. That just makes me instinctively avoid the area. </p><p><strong>Have you experienced anything particularly bad that makes you feel unsafe now? </strong><br>I've never been involved in a particular incident, no. I've lived in Zurich for 16 years, and luckily nothing traumatic ever happened. I guess that's also because I've always lived in areas that are generally pretty safe. </p><h1>AMSTERDAM, THE NETHERLANDS</h1><p class=\\\"has-image\\\"><img src=\\\"https://vice-images.vice.com/images/content-images-crops/2016/11/29/women-violence-harassment-street-876-body-image-1480439950-size_500.jpg\\\" alt=\\\"\\\" /></p><h2>Natasja, 29, student</h2><p><strong>VICE: Are there places or neighborhoods you tend to avoid when you're alone at night?<br></strong>No, I developed thick skin growing up in Amsterdam. Once, on the train at night, a man sat next to me and started touching me where his hands didn't belong. I yelled at him, and he ran to the next carriage. For a little while I sat next to women on the train if I had the choice, but I don't carry the experience around with me anymore. </p><p><strong>What do you do to avoid being harassed?</strong><br>Well, one very superficial thing is consider the way you dress. Today I'm dressed pretty boyish and not much happens on the street. That changes when I'm wearing something more feminine. </p><h1>WARSAW, POLAND</h1><p class=\\\"has-image\\\"><img src=\\\"https://vice-images.vice.com/images/content-images-crops/2016/11/29/women-violence-harassment-street-876-body-image-1480442712-size_500.jpeg\\\" alt=\\\"\\\" /></p><h2>Carolina, 22, student </h2><p><strong>VICE: Is there a place or a street in Warsaw you're not comfortable walking around alone at night? <br></strong>When I first arrived in Poland, I lived in Żoliborz, in the newer part of [Warsaw]. I had to pass a lot of unlit construction sites there, and I often felt like someone was watching or following me. </p><p><strong>Why do you think women feel unsafe walking alone?</strong><br>Women are perceived as being weaker than men. It might be easier to rob or harass a woman because you think she won't fight back. There's a greater chance a man will. After I played a concert in a club with my band once, I was packing up the instruments, and, as I lifted one of the cases, the club owner asked me: \\\"Isn't that too heavy for a woman?\\\" </p><h1>ATHENS, GREECE</h1><p class=\\\"has-image\\\"><img src=\\\"https://vice-images.vice.com/images/content-images-crops/2016/11/30/women-violence-harassment-street-876-body-image-1480512419-size_500.jpg\\\" alt=\\\"\\\" /></p><h2>Sofia, 18, student</h2><p><strong>VICE: Is there any street in Athens you're afraid to walk down alone at night?Sofia: </strong>Nothing ever happened to me, but I'm afraid to walk by myself. Even when I'm at a friend's, I call my brother and ask him to pick me up. It's not a particular street I'm afraid of—just dark, narrow alleys. I never used to go out alone. If I needed to go, let's say, from Ilion to Peristeri, I had to be with someone. It's gotten better now, though. </p><p><strong>Where does that come from?</strong><br>I don't know. You hear things on TV, your parents warn you. My father always tells me not to walk home by myself but call my brother or him. It's how I was raised.</p>")));


        mRV = (RecyclerView)findViewById(R.id.detailview_recyclerview);
        mRV.setLayoutManager(new LinearLayoutManager(this, LinearLayoutManager.VERTICAL, false));
        mAdapter = new ArticleInfoAdapter(list, this);
        mRV.setAdapter(mAdapter);




    }

    private void getArticleByID(String articleID){

        RequestQueue queue = Volley.newRequestQueue(this);
        String baseURL = "http://www.vice.com/api/article/";
        String fullURL = baseURL + articleID;


        StringRequest stringRequest = new StringRequest(Request.Method.GET, fullURL, new Response.Listener<String>() {
            @Override
            public void onResponse(String response) {

            }
        }, new Response.ErrorListener() {
            @Override
            public void onErrorResponse(VolleyError error) {
                Toast.makeText(DetailActivity.this, "Error in loading page", Toast.LENGTH_SHORT).show();
            }
        });

        queue.add(stringRequest);
    }

    private String getDataFromJSON(String data){

        String html = data;
        org.jsoup.nodes.Document doc = Jsoup.parse(html);

        org.jsoup.nodes.Element link = doc.select("p").first().addClass("");
        org.jsoup.nodes.Element test = doc.select("p").last();

        String testing = test.text();

        return testing;

    }
}
